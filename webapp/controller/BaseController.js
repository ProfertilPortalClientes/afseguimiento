sap.ui.define(["sap/ui/core/mvc/Controller","sap/ui/core/UIComponent","sap/m/library"],function(e,t,r){"use strict";var o=r.URLHelper;return e.extend("profertil.afeseguimiento.controller.BaseController",{getRouter:function(){return t.getRouterFor(this)},getModel:function(e){return this.getView().getModel(e)},setModel:function(e,t){return this.getView().setModel(e,t)},getResourceBundle:function(){return this.getOwnerComponent().getModel("i18n").getResourceBundle()},getManifestModel:function(e){return this.getOwnerComponent().getModel(e)},getDMSUrl:function(e){var t=this.getOwnerComponent().getManifest()["sap.app"]["id"];return jQuery.sap.getModulePath(t)+e},getDataRepo:function(e){var t=this.getDMSUrl("/SDM_API/browser");var r=e?t+"/"+e:t;return $.get({url:r})},uploadSingleFile:function(e,t,r){var o=new FormData;var n={cmisaction:"createDocument","propertyId[0]":"cmis:name","propertyId[1]":"cmis:objectTypeId","propertyValue[0]":t,"propertyValue[1]":"cmis:document",media:e};var a=Object.keys(n);for(var s of a){o.append(s,n[s])}$.ajax({url:this.getManifestModel("adjuntosModel").getProperty("/url")+r,type:"POST",data:o,contentType:false,processData:false,success:function(e,t){return true},error:function(e){return false}})},uploadSingleFilePromise:function(e,t,r){var o=this;return new Promise(function(n,a){var s=new FormData;var i={cmisaction:"createDocument","propertyId[0]":"cmis:name","propertyId[1]":"cmis:objectTypeId","propertyValue[0]":t,"propertyValue[1]":"cmis:document",media:e};var u=Object.keys(i);for(var c of u){s.append(c,i[c])}$.ajax({url:o.getManifestModel("adjuntosModel").getProperty("/url")+r,type:"POST",data:s,contentType:false,processData:false,success:function(e){n(e)},error:function(e){a(e)}})})},createFolder:function(e){var t=new FormData;var r={cmisaction:"createFolder","propertyId[0]":"cmis:name","propertyId[1]":"cmis:objectTypeId","propertyValue[0]":e,"propertyValue[1]":"cmis:folder"};var o=Object.keys(r);for(var n of o){t.append(n,r[n])}return $.ajax({url:this.getManifestModel("adjuntosModel").getProperty("/url"),type:"POST",data:t,contentType:false,processData:false,success:function(e,t){debugger},error:function(e){sap.m.MessageBox.error("Error en la subida de los adjuntos al repositorio. Contacte a su administrador")}})},getDMSUrl:function(e){var t=this.getOwnerComponent().getManifest()["sap.app"]["id"];return jQuery.sap.getModulePath(t)+e},getAFEFolder:function(e){return this.createFolder(e)},getObjectId:function(e,t){for(var r=0;r<e.objects.length;r++){var o={};o=e.objects[r].object.properties;if(o["cmis:name"].value===t){return o["cmis:objectId"].value}}return""}})});